(this.webpackJsonpshop=this.webpackJsonpshop||[]).push([[0],{198:function(e,t,n){e.exports=n(382)},274:function(e,t,n){},382:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(27),o=n.n(c),l=n(16),i=n(390),u=n(394),s=n(79),m=n.n(s),f=n(167),d=n.n(f),p=(n(274),n(100)),E=n.n(p),b=n(168),O=n(169),h=n.n(O),y=function(e){return{type:"SET_BOOKS",payload:e}},v=function(e){return{type:"ADD_BOOK_TO_CART",payload:e}},k=function(e){return{type:"REMOVE_BOOK_FROM_CART",payload:e}},j=function(e){return{type:"SET_FILTER",payload:e}},B=function(e){return{type:"SET_SORT",payload:e}},C=n(395),g=n(392),w=n(393),T=n(383),_=n(185),R=function(e){var t=e.title,n=e.id,r=e.image,c=e.removeBookFromCart,o=Object(l.b)();return a.a.createElement(w.a,{selection:!0,divided:!0,verticalAlign:"middle"},a.a.createElement(w.a.Item,null,a.a.createElement(w.a.Content,{floated:"right"},a.a.createElement(T.a,{color:"red",onClick:function(){return o(c(n))}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),a.a.createElement(_.a,{avatar:!0,src:r}),a.a.createElement(w.a.Content,null,t)))},S=function(e){var t=e.totalPrice,n=e.totalAmount,r=e.cart,c=e.removeBookFromCart;return a.a.createElement(C.a,null,a.a.createElement(C.a.Item,{name:"shop"},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u043d\u0438\u0433"),a.a.createElement(C.a.Menu,{position:"right"},a.a.createElement(C.a.Item,{name:"total"},"\u0418\u0442\u043e\u0433\u043e : \xa0 ",a.a.createElement("b",null,t)," \xa0 \u0440\u0443\u0431."),a.a.createElement(g.a,{trigger:a.a.createElement(C.a.Item,{name:"cart"},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 (",a.a.createElement("b",null,n),")"),content:r&&r.map((function(e,t){return a.a.createElement(R,Object.assign({removeBookFromCart:c},e,{key:t}))})),on:"click"})))},F=n(31),I=function(e){var t=e.book,n=e.addBookToCart,r=e.cart,c=Object(l.b)(),o=r.reduce((function(e,n){return e+(t.id===n.id?1:0)}),0);return a.a.createElement(u.a,null,a.a.createElement(_.a,{src:t.image,wrapped:!0,ui:!1}),a.a.createElement(u.a.Content,null,a.a.createElement(u.a.Header,null,t.title),a.a.createElement(u.a.Description,null,t.author)),a.a.createElement(u.a.Content,{extra:!0},a.a.createElement(F.a,{name:"rub"}),t.price),a.a.createElement(u.a.Content,{extra:!0},a.a.createElement(T.a,{onClick:function(){return c(n(t))}},a.a.createElement("span",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 ",o>0&&"(".concat(o,")"))," ")))},A=n(186),x=n(389),K=function(e){var t=e.setFilter,n=e.filterBy,r=Object(l.b)();return a.a.createElement(C.a.Item,null,a.a.createElement(x.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441",value:n,onChange:function(e){return r(t(e.target.value))}}))},L=function(e){var t=e.setSort,n=e.setFilter,c=e.filterBy,o=Object(l.b)(),i=Object(r.useState)("all"),u=Object(A.a)(i,2),s=u[0],m=u[1],f=function(e){m(e),o(t(e))};return a.a.createElement(C.a,{secondary:!0},a.a.createElement(C.a.Item,{name:"all",onClick:function(){return f("all")},active:"all"===s},"\u0412\u0441\u0435"),a.a.createElement(C.a.Item,{name:"high-price",onClick:function(){return f("high-price")},active:"high-price"===s},"\u0426\u0435\u043d\u0430 (\u0434\u043e\u0440\u043e\u0433\u0438\u0435)"),a.a.createElement(C.a.Item,{name:"low-price",onClick:function(){return f("low-price")},active:"low-price"===s},"\u0426\u0435\u043d\u0430 (\u0434\u0435\u0448\u0435\u0432\u044b\u0435)"),a.a.createElement(C.a.Item,{name:"author",onClick:function(){return f("author")},active:"author"===s},"\u0410\u0432\u0442\u043e\u0440"),a.a.createElement(K,{filterBy:c,setFilter:n}))},D=function(e,t,n){return function(e,t){switch(t){case"all":return e;case"high-price":return m()(e,"price","desc");case"low-price":return m()(e,"price","asc");case"author":return m()(e,"author","asc");default:return e}}(function(e,t){return e.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>=0||e.author.toLowerCase().indexOf(t.toLowerCase())>=0}))}(e,n),t)},M=function(){var e=Object(l.c)((function(e){return e.books.items&&D(e.books.items,e.sort.sortBy,e.filter.filterBy)})),t=Object(l.c)((function(e){return e.books.isReady})),n=Object(l.c)((function(e){return e.filter.filterBy})),c=Object(l.c)((function(e){return e.sort.sortBy})),o=Object(l.c)((function(e){return e.cart.books.reduce((function(e,t){return e+t.price}),0)})),s=Object(l.c)((function(e){return e.cart.books.length})),m=Object(l.c)((function(e){var t=e.cart;return d()(t.books,(function(e){return e.id}))})),f=Object(l.b)();return Object(r.useEffect)((function(){f(function(){var e=Object(b.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/books.json");case 2:n=e.sent,t(y(n.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[f]),a.a.createElement(i.a,null,a.a.createElement(S,{totalPrice:o,totalAmount:s,cart:m,removeBookFromCart:k}),a.a.createElement(L,{setSort:B,setFilter:j,sortBy:c,filterBy:n}),a.a.createElement(u.a.Group,{itemsPerRow:4},t?e&&e.map((function(e){return a.a.createElement(I,{book:e,key:e.id,addBookToCart:v,cart:m})})):"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."))},P=n(38),J=n(183),V=n.n(J),G=n(184),H=n(29),q={items:null,isReady:!1},z=n(187),N={books:[]},Q={sortBy:""},U={filterBy:""},W=Object(P.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOKS":return Object(H.a)({},e,{items:t.payload,isReady:!0});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_BOOK_TO_CART":return Object(H.a)({},e,{books:[].concat(Object(z.a)(e.books),[t.payload])});case"REMOVE_BOOK_FROM_CART":return Object(H.a)({},e,{books:e.books.filter((function(e){return e.id!==t.payload}))});default:return e}},sort:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT":return Object(H.a)({},e,{sortBy:t.payload});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return Object(H.a)({},e,{filterBy:t.payload});default:return e}}}),X=Object(P.d)(W,Object(P.a)(V.a,G.a));o.a.render(a.a.createElement(l.a,{store:X},a.a.createElement(M,null)),document.getElementById("root"))}},[[198,1,2]]]);
//# sourceMappingURL=main.c0e73d12.chunk.js.map